<!DOCTYPE html>
<hmtl>
    <head>
        <meta charset = "UTF-8">
        <title>Python Bot Dev Blog</title>
    </head>
    <body>
        <nav>
            <div class = "header">
                <h3 id = "menu">
                    <a href = "/index.html">Home</a>
                    |
                    <a href = "/blogs_page.html"> Blogs</a>
                    |
                    <a href = "/guides_page.html"> Guides</a>
                    |
                    <a href = "/projects_page.html"> Projects</a>
                    |
                    Archives
                </h3>
            </div>
        </nav>
        <hr>
        <header>
            <h1>Python Bot Dev Blog</h1>
        </header>
        <hr>
        <article>
            <div>
                <h1>Optimized Code. Added new actions. Added Fail-Safe feature</h1>
                    <h2>Optimized Performance:</h2>
       
                        <p>
                            The bot has a method called .collectAllData() that refreshed all the stats<br>
                            that are important when it goes into decision making<br>
                            Since the bot runs it's decision making on an infinite while loop (Until terminated)<br>
                            it has to always refresh the data to decide what is the best decision to take next<br>
                            based on the data provided and the set order of priority if multiple decisions are <br>
                            available<br>
                            <br>
                            The issue was I was letting the bot perform multiple decisions per iteration of the overarching<br>
                            infite loop. Because in my mind I thought more decisions made per iteration ment a faster bot<br>
                            But I was wrong<br>
                            Because any time a decisions is made assuming it is one that involes negativily affecting the value<br>
                            of stats like building and hiring workers. Those cost some kind of resource and change the value of stats<br>
                            So if the value changes they need to be updated again in order to run another decision<br>
                            The problem was the bot was updating stats every single time it had to decide whether or not to perform a decision<br>
                            <br>
                            This meant that even if the stats were not negativily changed than the bot would still recheck the stats and used the<br>
                            .collectAllData()<br>
                            Which might I add was a very resource intensive method because it has to go and read all the value of <br>
                            important stats from the webpage and save them to their corresponding variables<br>
                            <br>
                            My current approach now is by only allowing one decisions (That negatively affects stats) to be choose<br>
                            per iteration so that the bot only runs .collectAllData() once at the start of the iteration<br>
                            <br>
                            This has shown a major increase in the bot's performance<br>
                            <br>
                            I have also allowed certain decisions of similar kind like hiring a worker to be able to do it multiple times<br>
                            depending on the amount of resources<br>
                            So it would trigger a hiring spree to hire multiple workers instead of hiring only one worker and than<br>
                            checking the .collectAllData() and rehiring more workers<br>
                            <br>
                            I also let the bot run decisions that don't negatively impact resources on the same iteration <br>
                            as running a decision that does negatively impact resources<br>
                            This is because if the bot has already "created workers" it already spent the necessary workers<br>
                            So now it should assign those workers to available possions which costs 0 resources and should be <br>
                            performed at the same time that the decision to create workers is made<br>
                            <br>
                        </p>
                    <h2>New Features Added</h2>
                        <h3>Perform Upgrades</h3>
                        <p>
                            The bot will now purchase available upgrades<br>
                            Not all. Haven't gotten to far into late game testing<br>
                            Mostly letting the bot run from the beginning and middle<br>
                            stage of the game<br>
                            I also caught a few bugs that the bot would run into if dropped into<br>
                            a session of a game that was already in the mid stage of the game<br>
                            Fixed those. It mostly had to do with the way upgrades were being checked<br>
                        </p>
                        <h3>Hire workers</h3>
                        <p>
                            The bot will now hire workers to collect resources <br>
                            It can hire three types of worker. Farmers, wood cutters, and<br>
                            stone cutters.<br>
                            The exact amount of workers to hire for each type is dependant<br>
                            on the data collected. I am tweaking percentages and such<br>
                            but to find the optial ratio I would have to run to bot to compete<br>
                            against other instances of the same bot with different ratio's and compare<br>
                            their stats<br>
                        </p>
                        <p>Constructing housing</p>
                        <p>
                            This one is quite simple and economic<br>
                            The bought will construct the highest level of house available<br>
                            Going from tent to wooden hut to cottage. Still adding newer houses<br>
                            Then if the level of max population is equal to the current population <br>
                            The bot will construct housing<br>
                            The amount of houses to be constructed is dependant on the available resources<br>
                            I don't want to let the bot build more houses than the available food to create more<br>
                            workers are available<br>
                            Because that means the bot would create too many houses that will not be occupied<br>
                            and those resources could better be invested else where to maximize the economy<br>
                            <br>
                            It's all about buying what the economy needs and buying the most important upgrades<br>
                            first to start compounding resource collected<br>
                            <br>
                            Haha guess that degree for Business Administration didn't go to waste<br>
                        </p>
                        <h3>Fail Safe Measure</h3>
                        <p>
                            The bot now allows the user to not only upload their previous save files<br>
                            so the bot may work on previous work or previous savefiles done by<br>
                            the user but also perform automatic saves<br>
                            Because the game is a browser game and the bot runs a different versions<br>
                            of chrome that is designed for testing. The memory of the game is saved to the websites<br>
                            cookies<br>
                            And this version of chrome doesn't save cookies after it's closed<br>
                            So the bot has to manually export the save file from the game and hold on to it for the user<br>
                            <br>
                            Now the bot only returns the save file to the user when it is done playing/terminated<br>
                            Even if the python program hits a major error the bot will run a finally: block that will<br>
                            release the last savefile it collected back to the user through the terminal/CMD<br>
                            <br>
                            The auto saves are performed every minute and are so fast you can barely see the bot open the<br>
                            import/export menu, click on the export button save all the contents and close the menu<br>
                            <br>
                            This is great because now if I run into a bug I can open it and replay the condition before the <br>
                            bot hit the bug and see what might have caused it to than discover the source of the bug in my code<br>
                            <br>
                        </p>
                    <h2>Identified bugs:</h2>
                        <h3>Unclickable button being clicked:</h3>
                            <p>
                                Sometimes the bot will perform an action multiple times but around the last<br>
                                few times it clicks on the buttont the state of the button changes to unclickable<br>
                                due to a change in available resources<br>
                                The bot will still waste time clicking on an unclickable action.<br>
                                I believe the reasons may be because the resources arent being updates on certain decisions<br>
                                that allow multiple clicks<br>
                                I think a good fix would be a small data collections related to the decisions<br>
                                NOT using .collectAllData() because that method is way too resources heavy<br>
                                But something simple like updating the current amount of Wood<br>
                                if the decisions negatively affects the current supply of wood<br>
                            </p>
                        <h3>Bot not hiring other workers except farmers:</h3>
                            <p>
                                I fixed this error but it came back the last time I ran the bot.<br>
                                Last time it was due to the way the bot was checking for how<br>
                                many of each worker it should have<br>
                                I think perhaps I messed something up when I was changing the percentage ratio last night<br>
                            </p>
                <p>
                
                </p>
            </div>
            <hr>
         
            <div>
                <h1>Added Hosting For CivClicker(v1.1) to edwin-marino.com</h1>
               
                <p>
                    In the case that something happens and you or the bot aren't able to reach<br>
                    The original location for <a href="http://civclicker.sourceforge.net/civclicker/civclicker.html">CivClicker</a><br>
                    I have added CivClicker's source code to a page on edwin-marino.com so as long as you can read this<br>
                    Blog you and the bot can still play CivClicker<br>
                    This just reduces any variables like internet service providers and changes to the SourceForge URL<br>
                    Things that are out of my control and may turn render my bot obsolete in the future<br>
                    <br>
                    The new location where the bot will play the game is <a href = "civclicker/civclicker.html">here</a><br>
                    which will be an archived version of CivClicker(v1.1). I just want to note that CivClicker(v1.1) is licensed<br>
                    under GNU's GENERAL PUBLIC LICENSE and I have not modified the webpage in any way to profit off of <br>
                    an open source code or limit access to future users<br>
                    My intentions are to insure that all user's who have access to the bot also have access an archived version of<br>
                    CivClicker(v1.1) so that they may use my BOT to create an AI empire of their own!<br>
                    <br>
                    Also in the next batch for the bot I will add more building upgrades and possibily workers to the bot<br>
                    <br>
                    Thanks for listening,<br>
                    <br>
                    peace.<br>
                </p>
            </div>
         
            <div>
                <h1>First time using Python</h1>
               
                <p>                    
                    Judging by my Downloads/python-3.7.7-amb64.exe downloaded on<br>
                    3/20/2020 so I've only been using Python for four days<br>
                    But because of my experience using Java and some experimentation with<br>
                    C#, and C++ learning Python's syntax was easy<br>
                    I love it and hate it<br>
                    It's like driving a manual car and switching to automatic<br>
                    But the thing I really love about Python and the reason that<br>
                    made me want to pick it up as another programming language <br>
                    is all the resources online for open source Python Modules<br>
                    <br>
                    Not only do they have such a great community online but<br>
                    the seamless install of external libraries with Pip is amazing<br>
                    also Pyinstall and creating a .exe is so much more rewarding and easier<br>
                    in my opinion than trying to create a Jar file with Java and trying to run it with a .batch<br>
                    I know not exactly the samething. I feel like perhaps it's because<br>
                    I haven't really familiarized myself too much with Maven so handling Jar<br>
                    files with Java on Visual Studio Code is kind of annoying<br>
                    I've been manually editing the .classpath and doing all sorts of weird stuff<br>
                    and the worse part is that when I try to export it it doesnt all end up in a little<br>
                    neat package where the end user can double click and run it like they would with any other <br>
                    application.<br>
                    <br>
                    <img src = "botInAction.png"><br>
                    Using Pyinstall with Python I was able to not only create a .exe file of my Python file but also<br>
                    include external libraries that I used and in this case another executable file which was for the <br>
                    Google Chrome<br>
                    I had to use chromedriver.exe along with my Python program that imported from Selenium so that I could<br>
                    open and control the webbrowser with my python script. <br>
                    <br>
                    I ran into some trouble when I was testing my bot.exe program on a clean windows pc that didn't have any<br>
                    python language or anything dev related already installed<br>
                    Because it didn't already have chromedriver.exe installed on the computer the bot.exe wouldn't run<br>
                    So I included chromedriver.exe inside the bot.exe so the program and all its modules and classes were <br>
                    located in one place so when the user clicks on the bot.exe the python script has all the necessary components<br>
                    to run. And the best part is the user doesn't even need to have python installed on their PC because of the way <br>
                    Pyinstall turn the python script into a .exe<br>
                    <br>
                    The only thing the end user has to make sure is correct is that their computer can run a .exe file and that <br>
                    they are running the latest version of Chrome. <br>
                    <br>
                    This is what happens when the user clicks on the exe file. The bot opens up the terminal which<br>
                    is optional but I'm keeping for now so I can check for any errors<br>
                    Than it open the browser and goes to the location of the game <a href = "http://civclicker.sourceforge.net/civclicker/civclicker.html">CivClicker</a><br>
                    And begins to gather Food, Cut Wood, and Mine Stone. If it ever reaches <br>
                    max capacity for the resources storage levels than it will go to the build menu<br>
                    and buy more storage for the given resource<br>
                    <img src = "botBuilding.png"><br>
                    I did create some methods for getting other upgrades<br>
                    but I'm still familirazing myself with python so my level of code organization<br>
                    isn't as great as it is with Java so I'm trying to learn two things at once<br>
                    <br>
                    Right now my bot atleast collects resources and can build and move to different menus.<br>
                    So adding the rest of the buildings shouldn't be to challenging<br>
                    What is a bug that I have noticed is that in order for the Python script to click on an element<br>
                    It need to be somewhat in range of the current window<br>
                    So if I scroll to the bottom of the page and force to script to stay down at bottom<br>
                    while it's trying to zoom back up to see the element what will happen is that bot will hit<br>
                    an error and the bot will come to a stop<br>
                    I just need to find out the exact error and figure out a way to let the program continue<br>
                    Perhaps a "try and except" where I can just run a thread(few seconds) until the <br>
                    user stops pulling on the screen and than the bot can continue<br>
                    <br>
                    Another thing that bothers me is that the bot only starts a new session of the game<br>
                    there is no way for the User to currently load a pre existing save file and have the bot<br>
                    increase their already existing civilization<br>
                    This is because selenium initiates a version of Chrome that is similar to incognito<br>
                    The version of Chrome that is launched has no cookies from the user profile<br>
                    <br>
                    Because the save files for the game are saved through cookies I would need<br>
                    to find away to prompt the user to enter the Path to their Chrome Profile so I can<br>
                    access the cookie data and read/write the website save file to/from their main Chrome Profile<br>
                    So that way the next time they start the bot the bot will still be working on their<br>
                    previous civilization without loss of progress<br>
                    <br>
                    Another aspect of the game that I have yet to implement is the recruitment of workers<br>
                    at first I wanted the bot to do all the work but if the bot is really going to play the game<br>
                    than it should play it in the most optimal way I can possibly design it. In the game when you create <br>
                    workers they can produce resources at a x per seconds rate and this rate is only refreshed by the Javascript<br>
                    every fraction of a second<br>
                    I could have the bot mercelessly continue to spam collect resources but the result would be slower<br>
                    over time because it would be like doing 1 + 1 + 1 1000X times a second vs having the bot create workers that<br>
                    can generater 10_000 food per second and it ends up being less resource heavy for the computer and <br>
                    actually appears faster to the end user because it isn't slowing down the browser<br>
                    Also at some point the workers will be making more resources than the bots because given enough time<br>
                    they can be making over 10K+ in resources per second meanwhile I calculate that my bots at top<br>
                    PC efficiency are only opperating at about 20-30 sources per second (each resources) it's definently<br>
                    a different rate depanding on the PC (2009 HP Pavilion) <br>
                    <br>
                    My first "bot" attempt if I can even call it that was by using a Python Script that listened for a <br>
                    keyboard press on a particular letter and would than spam click the left mouse button until I clicked<br>
                    that same keyboard key to pause it<br>
                    This actually didn't result in much faster production that the workers because again the website was only<br>
                    able to refresh the values at such a slow rate that spam clicking resources would be a waste of time<br>
                    That time clicking the elements for collecting resources could better be spent on also hiring workers<br>
                    which would compound the earning for my civilisation as I'll constantly be investing in them over time<br>
                    <br>
                    My far future plans for this bot is to run multiple instances of the bot and have it learn from previous playthroughs<br>
                    so that it can record the amount of time for it's civlization to progress to a particular level and<br>
                    find out which is the most optimal way to play the game to reach that point. But to really make it fair<br>
                    I think the bots would have to be capped at a certain clicks per second so that differences in machine hardware<br>
                    can be accounted for and strategies can be properly weighed <br>
                    <br>
                    Basically if you can only click 1 click per second what is that most optimal way to advance your civilization<br>
                    to a certain point<br>
                    <br>
                    Thanks for listening,<br>
                    <br>
                    peace.<br>
                    <br>
                    ps next time I will record a video and post it to youtube and embed it in my website so you can watch<br>
                    it here like a demonstration of my bot in action.<br>
                </p>
            </div>

            <hr>
        </article>
        <footer>
            <h1>Resources and credits to:</h1>
            <p>
                datattofish.com<br>
                <br>
                    For providing me the resources on how to properly <br>
                    include .exe files inside my single bot.exe file so <br>
                    I can export my bot to share to other people<br>
                    <a href = "https://datatofish.com/executable-pyinstaller/">Link to their article</a><br>
                    <br>
                Civclicker (v1.1)<br>
                <br>
                    The game that my bot is dependant on and sole purpose<br>
                    was founded on<br>
                    <a href = "http://civclicker.sourceforge.net/civclicker/civclicker.html">Link to original site</a>
                David Stark<br>
                    Creator of CivClicker. His personal webpage <a href = "http://dhmstark.co.uk/">here</a><br>
                    Special thanks for him deciding to publish his code under GNU's GENERAL PUBLIC LICENSE<br>
                    allowing his code be viewed online and supporting by the open source community<br>
            </p>
        </footer>
    </body>
</hmtl>
